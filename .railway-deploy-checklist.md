# Railway Deployment Checklist

Use this checklist to ensure a smooth deployment process.

## Pre-Deployment âœ…

- [ ] All code committed and pushed to GitHub
- [ ] `.env.example` reviewed and understood
- [ ] Local testing completed (`docker-compose up` works)
- [ ] Railway account created at [railway.app](https://railway.app)
- [ ] Railway CLI installed (`npm install -g @railway/cli`)
- [ ] Logged into Railway CLI (`railway login`)

## Initial Setup âœ…

- [ ] Project initialized (`railway init`)
- [ ] PostgreSQL database added (`railway add --database postgresql`)
- [ ] Redis added (optional: `railway add --database redis`)
- [ ] Environment variables set (see below)

## Environment Variables âœ…

### Required
- [ ] `ENVIRONMENT=production`
- [ ] `DEBUG=false`
- [ ] `DATABASE_URL` (auto-set by Railway âœ“)

### Optional (if using The Odds API)
- [ ] `ODDS_API_KEY=your_key_here`
- [ ] `ODDS_API_BASE_URL=https://api.the-odds-api.com/v4`

### Scraping Configuration
- [ ] `SCRAPE_INTERVAL_MINUTES=5`
- [ ] `MAX_CONCURRENT_REQUESTS=5`
- [ ] `REQUEST_DELAY_MIN=1.0`
- [ ] `REQUEST_DELAY_MAX=2.0`

### Analysis Configuration
- [ ] `LINE_MOVEMENT_THRESHOLD_PCT=10.0`
- [ ] `LINE_MOVEMENT_THRESHOLD_ABS=5.0`
- [ ] `HOURS_BEFORE_KICKOFF_THRESHOLD=3.0`

## Deployment âœ…

- [ ] Backend deployed (`railway up`)
- [ ] Build completed successfully (check logs)
- [ ] Database migrations ran (`railway run alembic upgrade head`)
- [ ] Domain generated (`railway domain`)
- [ ] Health check passes (`curl https://your-app.railway.app/health`)

## Frontend Deployment âœ…

Choose one option:

### Option A: Railway
- [ ] New service created for frontend
- [ ] Root directory set to `frontend`
- [ ] Build command: `yarn install && yarn build`
- [ ] Start command: `npx serve -s dist -p $PORT`
- [ ] `VITE_API_URL` set to backend URL
- [ ] Domain generated

### Option B: Vercel/Netlify
- [ ] Frontend built locally (`cd frontend && yarn build`)
- [ ] Deployed to Vercel/Netlify
- [ ] `VITE_API_URL` environment variable set
- [ ] Domain configured

## Post-Deployment Verification âœ…

- [ ] Backend health endpoint works: `GET /health`
- [ ] API endpoints respond: `GET /api/props/snapshots`
- [ ] Scheduler is running (check logs for "Starting application...")
- [ ] Database connection successful (no errors in logs)
- [ ] Frontend loads correctly
- [ ] Frontend can call backend API (CORS configured)
- [ ] WebSocket connections work (if applicable)

## CORS Configuration âœ…

- [ ] Backend CORS updated with frontend URL
- [ ] Test cross-origin requests from frontend
- [ ] No CORS errors in browser console

## Monitoring Setup âœ…

- [ ] Railway metrics dashboard reviewed
- [ ] Log monitoring configured
- [ ] Cost alerts set up (optional)
- [ ] Health check monitoring enabled

## Documentation âœ…

- [ ] Production URLs documented
- [ ] Environment variables documented
- [ ] Deployment process documented for team
- [ ] Rollback procedure understood

## Security âœ…

- [ ] `.env` file NOT committed to git
- [ ] API keys stored as Railway secrets
- [ ] HTTPS enabled (automatic with Railway)
- [ ] CORS properly restricted
- [ ] Database credentials secure

## Performance âœ…

- [ ] Resource usage monitored (CPU, Memory)
- [ ] Database size checked
- [ ] API response times acceptable
- [ ] Scheduler jobs running on time

## Backup & Recovery âœ…

- [ ] Database backup strategy understood
- [ ] Rollback procedure tested
- [ ] Previous deployment available for rollback

## Final Checks âœ…

- [ ] All tests passing
- [ ] No errors in production logs
- [ ] Application functioning as expected
- [ ] Team notified of deployment
- [ ] Production URL shared with stakeholders

---

## Quick Test Commands

```bash
# Health check
curl https://your-app.railway.app/health

# API test
curl https://your-app.railway.app/api/props/snapshots

# View logs
railway logs

# Check environment variables
railway variables

# Check status
railway status
```

---

## If Something Goes Wrong

### Rollback
```bash
railway rollback
```

### Check Logs
```bash
railway logs --deployment
```

### Restart Service
```bash
railway restart
```

### Connect to Database
```bash
railway connect postgres
```

---

## Cost Monitoring

Expected monthly costs:
- Backend: $1-3
- PostgreSQL: $5
- Redis: $1-2
- **Total: $7-11/month**

Check actual usage:
- Go to Railway dashboard â†’ "Usage" tab
- Monitor daily to catch any spikes

---

## Success! ðŸŽ‰

When all items are checked, your deployment is complete!

**Next steps:**
1. Monitor logs for first 24 hours
2. Test all features thoroughly
3. Set up regular backups
4. Document any issues encountered
5. Share with users!

---

**Deployment Date:** _____________

**Deployed By:** _____________

**Production URL:** _____________

**Notes:**
_____________________________________________
_____________________________________________
_____________________________________________

